async function cariTP() {
            const mapel = document.getElementById('mataPelajaran').value;
            const kelas = document.getElementById('kelas').value;
            const btn = document.getElementById('btn-tp');
            const listArea = document.getElementById('list-tp');
            
            if(!mapel) return alert("Ketik dulu Mata Pelajarannya ya, Pak.");

            btn.innerText = "Sedang Mencari TP...";
            btn.disabled = true;

            try {
                const response = await fetch('/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ mode: "CARI_TP", mataPelajaran: mapel, kelas: kelas })
                });
                
                const data = await response.json();
                
                if (data.error) {
                    alert("Error: " + data.error);
                    return;
                }

                listArea.innerHTML = "";
                data.pilihanTP.forEach((tp) => {
                    listArea.innerHTML += `
                        <label class="flex items-start gap-3 p-4 border-2 border-slate-100 rounded-2xl hover:bg-blue-50 cursor-pointer transition-all">
                            <input type="radio" name="pilih_tp" value="${tp}" class="mt-1" onclick="tpTerpilih = this.value">
                            <span class="text-sm font-semibold text-slate-700">${tp}</span>
                        </label>`;
                });

                document.getElementById('area-pilihan-tp').classList.remove('hidden');
                document.getElementById('btn-gen').classList.remove('hidden');
            } catch (e) {
                console.error(e);
                alert("Gagal koneksi ke server. Cek internet atau Vercel Logs.");
            } finally {
                btn.innerText = "Cari Tujuan";
                btn.disabled = false;
            }
        }
